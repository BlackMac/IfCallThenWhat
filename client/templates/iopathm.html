<head>
  <title>callz.io for sipgate.io</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
</head>

<body>
  <div class="container">
    <div class="header">

      <h3 class="text-muted">callz.io for sipgate.io</h3>
    </div>
  </div>
  <div class="container">
    {{> calllist}}
  </div>
</body>

<template name="calllist">
  <div class="row">
  {{#if calls.count}}
    <div class="col-md-5">
    <ul class="list-group">
      {{#each calls}}
        {{> phonecall}}
      {{/each}}
    </ul>
    </div>
  {{else}}
    <div class="jumbotron text-center">
      {{#if onboarding}}
        <p>Tragen Sie diese Push-URL in <a href="https://simquadrat.de">sipgate.io</a> für eingehende und ausgehende Anrufe ein:<br>
          <strong class="text-shrink-sm">{{apiUrl}}</strong>
        </p>
        <div class="row">
          <div class="col-sm-6 col-md-offset-3">
            <div class="embed-responsive embed-responsive-4by3">
              <iframe class="embed-responsive-item" src="https://www.youtube.com/embed/G_AN2IffMhE?autoplay=1&controls=1&showinfo=0&loop=1&theme=light&modestbranding=1&playlist=G_AN2IffMhE"></iframe>
            </div>
          </div>
        </div>
        <p></p>
        <p>
          <button class="btn btn-lg btn-success onboarding-0">Ich habe die URL eingetragen.</button>
        </p>
      {{else}}
        <p>Rufen Sie nun eine beliebige Nummer von ihrem sipgate.io Endgerät (simquadrat Handy oder sipgate VoIP Telefon) an. Innerhalb weniger Sekunden wird der Anruf hier angezeigt.</p>
        <img src="waiting.png">
        <div class="alert alert-info" role="alert">Fällt Ihnen niemand ein, den Sie anrufen können? Dann versuchen Sie es doch einfach mal mit der <strong>10005</strong>. Wir freuen uns auf Ihren Anruf!</div>
        <button class="btn btn-sm btn-danger onboarding-1 pull-right">Der Anruf erscheint nicht.</button>

      {{/if}}
    </div>
  {{/if}}
  </div>
</template>

<template name="phonecall">
  <li class="list-group-item {{#if active}}call-active{{/if}}">
    {{#if rejected}}
      <span class="glyphicon glyphicon-remove-sign reject-icon" aria-hidden="true" data-toggle="tooltip" data-placement="right" title="Configure sipgate.io to use this link for incoming and outgoing calls."></span>
    {{else}}
      <span class="glyphicon glyphicon-ok-sign accept-icon" aria-hidden="true" data-toggle="tooltip" data-placement="right" title="Configure sipgate.io to use this link for incoming and outgoing calls."></span>
    {{/if}}
    <span class="badge">{{datetime.toLocalTimeString}}</span>
    Anruf von {{from}}</li>
</template>
